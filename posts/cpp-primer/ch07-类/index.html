<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ch07 类 | Paul's Blog</title>
<meta name=keywords content="cpp"><meta name=description content="第七章 类 7.1 定义抽象数据类型 类成员 必须在类的内部声明，不能在其他地方增加成员。 成员可以是数据，函数，类型别名。 类的const成员函数不会修改类"><meta name=author content="Paul"><link rel=canonical href=https://qinganzhang.github.io/posts/cpp-primer/ch07-%E7%B1%BB/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://qinganzhang.github.io/favicon.ico><link rel=apple-touch-icon href=https://qinganzhang.github.io/apple-touch-icon.png><meta name=twitter:title content="Ch07 类 | Paul's Blog"><meta name=twitter:description content="第七章 类 7.1 定义抽象数据类型 类成员 必须在类的内部声明，不能在其他地方增加成员。 成员可以是数据，函数，类型别名。 类的const成员函数不会修改类"><meta property="og:title" content="Ch07 类 | Paul's Blog"><meta property="og:description" content="第七章 类 7.1 定义抽象数据类型 类成员 必须在类的内部声明，不能在其他地方增加成员。 成员可以是数据，函数，类型别名。 类的const成员函数不会修改类"><meta property="og:type" content="article"><meta property="og:url" content="https://qinganzhang.github.io/posts/cpp-primer/ch07-%E7%B1%BB/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-27T15:57:08+08:00"><meta property="article:modified_time" content="2024-02-27T15:57:08+08:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Post","item":"https://qinganzhang.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Ch07 类","item":"https://qinganzhang.github.io/posts/cpp-primer/ch07-%E7%B1%BB/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ch07 类 | Paul's Blog","name":"Ch07 类","description":"第七章 类 7.1 定义抽象数据类型 类成员 必须在类的内部声明，不能在其他地方增加成员。 成员可以是数据，函数，类型别名。 类的const成员函数不会修改类","keywords":["cpp"],"wordCount":"1983","inLanguage":"en","datePublished":"2024-02-27T15:57:08+08:00","dateModified":"2024-02-27T15:57:08+08:00","author":{"@type":"Person","name":"Paul"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://qinganzhang.github.io/posts/cpp-primer/ch07-%E7%B1%BB/"},"publisher":{"@type":"Organization","name":"Paul's Blog","logo":{"@type":"ImageObject","url":"https://qinganzhang.github.io/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css integrity=sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js integrity=sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://qinganzhang.github.io/ accesskey=h title="Paul's Blog (Alt + H)">Paul's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://qinganzhang.github.io/posts/ title=Posts class=active>Posts</a></li><li><a href=https://qinganzhang.github.io/archives/ title=Archive>Archive</a></li><li><a href=https://qinganzhang.github.io/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li><li><a href=https://qinganzhang.github.io/tags/ title=Tags>Tags</a></li><li><a href=https://qinganzhang.github.io/categories/ title=Categories>Categories</a></li><li><a href=https://qinganzhang.github.io/about/ title=About>About</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://qinganzhang.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://qinganzhang.github.io/posts/>Post</a></div><h1 class=post-title>Ch07 类</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>
<span>2024-02-27</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://qinganzhang.github.io/tags/cpp/>cpp</a></span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg>
<span>1983 words</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>4 min</span></span></div></header><div class="toc side right"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%ac%ac%e4%b8%83%e7%ab%a0-%e7%b1%bb aria-label="第七章 类">第七章 类</a><ul><li><a href=#71-%e5%ae%9a%e4%b9%89%e6%8a%bd%e8%b1%a1%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b aria-label="7.1 定义抽象数据类型">7.1 定义抽象数据类型</a><ul><li><a href=#%e7%b1%bb%e6%88%90%e5%91%98 aria-label=类成员>类成员</a></li><li><a href=#%e9%9d%9e%e6%88%90%e5%91%98%e5%87%bd%e6%95%b0 aria-label=非成员函数>非成员函数</a></li></ul></li><li><a href=#72-%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6%e4%b8%8e%e5%b0%81%e8%a3%85 aria-label="7.2 访问控制与封装">7.2 访问控制与封装</a><ul><li><a href=#%e5%8f%8b%e5%85%83 aria-label=友元>友元</a></li></ul></li><li><a href=#73-%e7%b1%bb%e7%9a%84%e5%85%b6%e4%bb%96%e7%89%b9%e6%80%a7 aria-label="7.3 类的其他特性">7.3 类的其他特性</a><ul><li><a href=#this aria-label=this><code>this</code></a></li><li><a href=#%e7%b1%bb%e7%b1%bb%e5%9e%8b aria-label=类类型>类类型</a></li><li><a href=#ch07-%e7%b1%bb%e5%8f%8b%e5%85%83%e5%8f%8b%e5%85%83 aria-label=[[ch07-类#友元|友元]]>[[ch07-类#友元|友元]]</a></li></ul></li><li><a href=#74-%e7%b1%bb%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f aria-label="7.4 类的作用域">7.4 类的作用域</a></li><li><a href=#75-%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%86%8d%e6%8e%a2 aria-label="7.5 构造函数再探">7.5 构造函数再探</a><ul><li><a href=#%e5%a7%94%e6%89%98%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0-delegating-constructor aria-label="委托构造函数 （delegating constructor）">委托构造函数 （delegating constructor）</a></li><li><a href=#%e9%9a%90%e5%bc%8f%e7%9a%84%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2 aria-label=隐式的类型转换>隐式的类型转换</a></li><li><a href=#%e8%81%9a%e5%90%88%e7%b1%bbobsidianbooknotetypeannotationbookcpp_primer-e99885e8afbbe7ac94e8aeb0primer20ce7acac5e78988pdfid2b69f080-2a9d-5995-2c7e-1e0b9bfa85ebpage292rect95760180960123120190080 aria-label=聚合类><a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=2b69f080-2a9d-5995-2c7e-1e0b9bfa85eb&amp;page=292&amp;rect=95.760,180.960,123.120,190.080">聚合类</a></a></li><li><a href=#%e5%ad%97%e9%9d%a2%e5%80%bc%e5%b8%b8%e9%87%8f%e7%b1%bb aria-label=字面值常量类>字面值常量类</a></li></ul></li><li><a href=#76-%e7%b1%bb%e7%9a%84%e9%9d%99%e6%80%81%e6%88%90%e5%91%98 aria-label="7.6 类的静态成员">7.6 类的静态成员</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=第七章-类>第七章 类<a hidden class=anchor aria-hidden=true href=#第七章-类>¶</a></h1><h2 id=71-定义抽象数据类型>7.1 定义抽象数据类型<a hidden class=anchor aria-hidden=true href=#71-定义抽象数据类型>¶</a></h2><h3 id=类成员>类成员<a hidden class=anchor aria-hidden=true href=#类成员>¶</a></h3><ul><li>必须在类的内部声明，不能在其他地方增加成员。</li><li>成员可以是数据，函数，类型别名。</li><li><strong>类的const成员函数</strong>不会修改类的数据成员：<code>void func() const;</code><ul><li>const成员函数的声明和定义处都要加const</li><li>const成员函数不能调用本类的非const成员函数</li></ul></li><li><strong>内联函数</strong><ul><li>定义在类内部的函数是隐式inline函数</li><li>inline成员函数应该与类定义同一个头文件中</li></ul></li><li><strong>可变数据成员</strong> （mutable data member）：表示数据成员永远可变<ul><li><code>mutable int cnt;</code>，这样即使在const成员函数中也可以修改cnt的值</li></ul></li><li><strong>[[ch07-类#返回<code>this</code>的成员函数|返回this的成员函数]]</strong></li><li><strong>构造函数</strong><ul><li>构造函数初始值列表：<code>Sales_item(): units_sold(0), revenue(0.0) { }</code> ^742596<ul><li>但是类内初始值必须使用等号或者花括号进行初始化</li></ul></li><li>当一个类没有定义任何构造函数时，编译器才会生成一个默认构造函数（也称合成的默认构造函数），使用<code>=default</code>要求编译器使用合成的默认的构造函数。 ^15282e</li></ul></li></ul><h3 id=非成员函数>非成员函数<a hidden class=anchor aria-hidden=true href=#非成员函数>¶</a></h3><ul><li>和类相关的非成员函数，定义和声明都应该在类的外部。</li></ul><h2 id=72-访问控制与封装>7.2 访问控制与封装<a hidden class=anchor aria-hidden=true href=#72-访问控制与封装>¶</a></h2><ul><li>访问说明符（access specifiers）：<code>public</code>、<code>private</code>、<code>protected</code></li><li><code>class</code>与<code>struct</code>都可以被用于定义一个类，唯一的却别在于默认访问权限：<ul><li><code>class</code>：默认成员是 <code>priavte</code>的。</li><li><code>struct</code>：默认成员是 <code>public</code>的。</li></ul></li></ul><h3 id=友元>友元<a hidden class=anchor aria-hidden=true href=#友元>¶</a></h3><ul><li>在类A中设置友元B（函数或类），即允许B访问A中的非共有成员</li><li>语法相关：<ul><li>通常将友元声明成组地放在类定义的开始或者结尾，但友元不是类的成员，不受public/private的约束</li><li>如果类想把一组重载函数声明为友元，需要对这组函数中的每一个分别声明。</li><li>友元关系不存在传递性。</li><li>把其他类的成员函数声明为友元时，必须明确指定该函数所属的类名。</li><li>友元函数可以直接定义在类的内部（隐式内联），但是必须在类外部提供相应声明，并且要在调用之前进行声明<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>X</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>friend</span> <span class=kt>void</span> <span class=nf>fir</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* do something */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=kt>void</span> <span class=n>pub</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=kt>void</span> <span class=n>pri</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>X</span><span class=o>::</span><span class=n>pub</span><span class=p>()</span> <span class=p>{</span> <span class=n>fir</span><span class=p>();</span> <span class=p>}</span> <span class=c1>// 错误：友元函数fri在类外必须进行声明且需要在调用之前进行声明
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>fir</span><span class=p>();</span> <span class=c1>// 类X的友元函数fri，在类外进行声明
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=n>X</span><span class=o>::</span><span class=n>h</span><span class=p>()</span> <span class=p>{</span> <span class=n>f</span><span class=p>();</span> <span class=p>}</span>     
</span></span></code></pre></td></tr></table></div></div></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback></code></pre></td></tr></table></div></div></li></ul><h2 id=73-类的其他特性>7.3 类的其他特性<a hidden class=anchor aria-hidden=true href=#73-类的其他特性>¶</a></h2><h3 id=this><code>this</code><a hidden class=anchor aria-hidden=true href=#this>¶</a></h3><ul><li>每个成员函数都有一个额外的、隐含的形参<code>this</code>，<code>this</code>总是指向调用该成员函数的对象<ul><li>在普通成员函数中，this是一个<code>T *const</code>类型的指针</li><li>在const成员函数中，this是一个<code>const T *const</code>类型的指针（因此数据成员无法修改）</li><li>静态函数中不能使用this指针</li></ul></li><li>const对象或是const对象的指针/引用，只能调用const成员函数；否则均可</li><li><code>return *this;</code>可以让成员函数<strong>连续调用</strong>。</li></ul><h3 id=类类型>类类型<a hidden class=anchor aria-hidden=true href=#类类型>¶</a></h3><ul><li>可以声明一个类而暂时不定义它，称为<a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=6fbd93d1-81be-2584-6f7d-5147c71be3ad&amp;page=276&amp;rect=148.810,525.840,185.290,534.000">前向声明</a>，用于引入类的名字；在前向声明之后、定义之前是一个不完全类型</li><li>可以定义指向不完全类型的指针或引用，也可以声明（但是不能定义）以不完全类型作为参数或返回值类型的函数</li></ul><h3 id=ch07-类友元友元>[[ch07-类#友元|友元]]<a hidden class=anchor aria-hidden=true href=#ch07-类友元友元>¶</a></h3><h2 id=74-类的作用域>7.4 类的作用域<a hidden class=anchor aria-hidden=true href=#74-类的作用域>¶</a></h2><p>类型别名如果在类外已经定义过，不能在类内再次定义。</p><h2 id=75-构造函数再探>7.5 构造函数再探<a hidden class=anchor aria-hidden=true href=#75-构造函数再探>¶</a></h2><ul><li>使用初始值列表进行初始化才是真正的初始化，在构造函数体中进行“初始化”只是赋值<ul><li>如果是const成员或是引用类型，则必须在<strong>构造函数初始值列表</strong>中将其初始化（圆括号初始化）<a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=e5af4ab3-b656-c156-52ca-a970eb1e7843&amp;page=284&amp;rect=251.230,38.650,397.440,46.810">例子</a></li></ul></li></ul><h3 id=委托构造函数-delegating-constructor>委托构造函数 （delegating constructor）<a hidden class=anchor aria-hidden=true href=#委托构造函数-delegating-constructor>¶</a></h3><p>委托构造函数通过其他构造函数来执行自己的初始化过程
- <code>Sale_data(): Sale_data("", 0, 0) {}</code></p><h3 id=隐式的类型转换>隐式的类型转换<a hidden class=anchor aria-hidden=true href=#隐式的类型转换>¶</a></h3><ul><li><strong>转换构造函数</strong>：如果构造函数只接受一个实参，则它实际上定义了转换为此类类型的<strong>隐式转换机制</strong>，因此可以叫做转换构造函数。</li><li>编译器只会自动进行<a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=b361b56d-3b61-5fee-5d3f-33c8af531492&amp;page=290&amp;rect=69.360,424.320,173.280,432.720">一步的隐式类型转换</a></li><li>将转换构造函数声明为<code>explicit</code>从而抑制隐式类型转换<ul><li>explicit关键字只对接受一个实参的构造函数有效，需要多个实参的构造函数不能用于执行隐式转换，因此也无须将其指定为explicit</li><li>只在类内声明构造函数时使用explicit，在类外部定义时不应重复</li><li><code>explicit</code>构造函数只能用于直接初始化（圆括号初始化），不能用于拷贝赋值初始化（<a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=3ce3ab3e-72e2-25d6-75ab-fe76a0f0014e&amp;page=291&amp;rect=52.560,293.290,222.961,301.930">例子</a>）</li></ul></li></ul><h3 id=聚合类obsidianbooknotetypeannotationbookcpp_primer-e99885e8afbbe7ac94e8aeb0primer20ce7acac5e78988pdfid2b69f080-2a9d-5995-2c7e-1e0b9bfa85ebpage292rect95760180960123120190080><a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=2b69f080-2a9d-5995-2c7e-1e0b9bfa85eb&amp;page=292&amp;rect=95.760,180.960,123.120,190.080">聚合类</a><a hidden class=anchor aria-hidden=true href=#聚合类obsidianbooknotetypeannotationbookcpp_primer-e99885e8afbbe7ac94e8aeb0primer20ce7acac5e78988pdfid2b69f080-2a9d-5995-2c7e-1e0b9bfa85ebpage292rect95760180960123120190080>¶</a></h3><h3 id=字面值常量类>字面值常量类<a hidden class=anchor aria-hidden=true href=#字面值常量类>¶</a></h3><ul><li><code>constexpr</code>函数的参数和返回值必须是字面值。</li><li><strong>字面值类型</strong>：算数类型，引用，指针，聚合类</li><li><a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=bb154d0b-92ba-c46f-65db-80fd7cd1e67b&amp;page=293&amp;rect=54.720,75.840,144,84.480">constexpr 构造函数</a></li></ul><h2 id=76-类的静态成员>7.6 类的静态成员<a hidden class=anchor aria-hidden=true href=#76-类的静态成员>¶</a></h2><ul><li>语法相关：<ul><li>静态成员可以是public或是private的</li><li>静态成员可以是常量、指针、引用、类</li><li>静态成员函数不包含this指针，不能声明为const成员函数</li><li>定义和初始化<ul><li>在类内声明，类外定义并初始化。</li><li>在类外定义时，不能重复 static 关键字，static 只出现在类内的声明中。</li><li>只有<code>constexpr</code>类型的静态数据成员可以在类内定义。</li></ul></li></ul></li><li>使用：<ul><li>使用作用域运算符<code>::</code>直接访问静态成员:<code>r = Account::rate();</code></li><li>也可以使用类的对象访问：<code>r = ac.rate();</code></li></ul></li><li>特殊场景：<a href="obsidian://booknote?type=annotation&amp;book=Cpp_Primer-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/Primer%20C++(%E7%AC%AC5%E7%89%88).pdf&amp;id=8c7bfe7a-bc18-a299-2930-8fb9548b9898&amp;page=297&amp;rect=61.920,395.040,260.640,403.680">例子</a><ul><li>静态数据成员的类型可以是不完全类型，比如可以是它所属的类类型，而普通变量不能（只能声明为所属类类型的指针或引用）</li><li>可以使用静态成员变量作为函数的默认实参</li></ul></li></ul></div><footer class=post-footer><nav class=paginav><a class=prev href=https://qinganzhang.github.io/posts/cpp-primer/ch08-io%E5%BA%93/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Ch08 IO库</span>
</a><a class=next href=https://qinganzhang.github.io/posts/cpp-primer/ch06-%E5%87%BD%E6%95%B0/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>Ch06 函数</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://qinganzhang.github.io/>Paul's Blog</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a>
</span><span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script></body></html>